{"main": "I2NvZGluZzogdXRmLTgKaW1wb3J0IGpzb24KaW1wb3J0IHJlcXVlc3RzCmltcG9ydCByYW5kb20sIHN0cmluZwppbXBvcnQgb3MKaW1wb3J0IHBsYXRmb3JtCmltcG9ydCB0cmFjZWJhY2sKaW1wb3J0IGFzeW5jaW8KaW1wb3J0IHRpbWUKaW1wb3J0IHJlCmltcG9ydCBodHRweApmcm9tIG9zIGltcG9ydCBzeXN0ZW0KZnJvbSByYW5kb20gaW1wb3J0IHJhbmRpbnQKZnJvbSBkaXNjb3JkLmV4dCBpbXBvcnQgY29tbWFuZHMKZnJvbSBjb2xvcmFtYSBpbXBvcnQgRm9yZSwgaW5pdAoKaW5pdCgpCmRhdGEgPSB7fQoKd2l0aCBvcGVuKCd0b2tlbi5qc29uJykgYXMgZjoKICAgIGRhdGEgPSBqc29uLmxvYWQoZikKdG9rZW4gPSBkYXRhWyd0b2tlbiddCgoKb3Muc3lzdGVtKCJjbHMiKQpvcy5zeXN0ZW0oInRpdGxlIE5JVFJPIFNFTkRFUiBCWSBHVVlFRElUIikKcHJpbnQoJ1wwMzNbMTszNm0nICsgIiIiIOKWiOKWiOKWiOKWhCAgICDiloggIOKWiOKWiOKWk+KWhOKWhOKWhOKWiOKWiOKWiOKWiOKWiOKWkyDilojilojiloDilojilojiloggICDilpLilojilojilojilojiloggICAgICAg4paI4paI4paI4paI4paI4paIIOKWk+KWiOKWiOKWiOKWiOKWiCAg4paI4paI4paI4paEICAgIOKWiCDilpPilojilojilojilojilojiloQg4paT4paI4paI4paI4paI4paIICDilojilojiloDilojilojiloggIAog4paI4paIIOKWgOKWiCAgIOKWiCDilpPilojilojilpLilpMgIOKWiOKWiOKWkiDilpPilpLilpPilojilogg4paSIOKWiOKWiOKWkuKWkuKWiOKWiOKWkiAg4paI4paI4paSICAg4paS4paI4paIICAgIOKWkiDilpPiloggICDiloAgIOKWiOKWiCDiloDiloggICDilogg4paS4paI4paI4paAIOKWiOKWiOKWjOKWk+KWiCAgIOKWgCDilpPilojilogg4paSIOKWiOKWiOKWkgrilpPilojiloggIOKWgOKWiCDilojilojilpLilpLilojilojilpLilpIg4paT4paI4paI4paRIOKWkuKWkeKWk+KWiOKWiCDilpHiloTilogg4paS4paS4paI4paI4paRICDilojilojilpIgICDilpEg4paT4paI4paI4paEICAg4paS4paI4paI4paIICAg4paT4paI4paIICDiloDilogg4paI4paI4paS4paR4paI4paIICAg4paI4paM4paS4paI4paI4paIICAg4paT4paI4paIIOKWkeKWhOKWiCDilpIK4paT4paI4paI4paSICDilpDilozilojilojilpLilpHilojilojilpHilpEg4paT4paI4paI4paTIOKWkSDilpLilojilojiloDiloDilojiloQgIOKWkuKWiOKWiCAgIOKWiOKWiOKWkSAgICAg4paSICAg4paI4paI4paS4paS4paT4paIICDiloQg4paT4paI4paI4paSICDilpDilozilojilojilpLilpHilpPilojiloQgICDilozilpLilpPiloggIOKWhCDilpLilojilojiloDiloDilojiloQgIArilpLilojilojilpEgICDilpPilojilojilpHilpHilojilojilpEgIOKWkuKWiOKWiOKWkiDilpEg4paR4paI4paI4paTIOKWkuKWiOKWiOKWkuKWkSDilojilojilojilojilpPilpLilpEgICDilpLilojilojilojilojilojilojilpLilpLilpHilpLilojilojilojilojilpLilpLilojilojilpEgICDilpPilojilojilpHilpHilpLilojilojilojilojilpMg4paR4paS4paI4paI4paI4paI4paS4paR4paI4paI4paTIOKWkuKWiOKWiOKWkgrilpEg4paS4paRICAg4paSIOKWkiDilpHilpMgICAg4paSIOKWkeKWkSAgIOKWkSDilpLilpMg4paR4paS4paT4paR4paRIOKWkuKWkeKWkuKWkeKWkuKWkSAgICDilpIg4paS4paT4paSIOKWkiDilpHilpHilpEg4paS4paRIOKWkeKWkSDilpLilpEgICDilpIg4paSICDilpLilpLilpMgIOKWkiDilpHilpEg4paS4paRIOKWkeKWkSDilpLilpMg4paR4paS4paT4paRCuKWkSDilpHilpEgICDilpEg4paS4paRIOKWkiDilpEgICAg4paRICAgICAg4paR4paSIOKWkSDilpLilpEgIOKWkSDilpIg4paS4paRICAgIOKWkSDilpHilpIgIOKWkSDilpEg4paRIOKWkSAg4paR4paRIOKWkeKWkSAgIOKWkSDilpLilpEg4paRIOKWkiAg4paSICDilpEg4paRICDilpEgIOKWkeKWkiDilpEg4paS4paRCiAgIOKWkSAgIOKWkSDilpEgIOKWkiDilpEgIOKWkSAgICAgICAg4paR4paRICAg4paRIOKWkSDilpEg4paRIOKWkiAgICAg4paRICDilpEgIOKWkSAgICAg4paRICAgICAg4paRICAg4paRIOKWkSAg4paRIOKWkSAg4paRICAgIOKWkSAgICAg4paR4paRICAg4paRIAogICAgICAgICDilpEgIOKWkSAgICAgICAgICAgICAg4paRICAgICAgICAg4paRIOKWkSAgICAgICAgICAg4paRICAgICDilpEgIOKWkSAgICAgICAgIOKWkSAgICDilpEgICAgICAg4paRICDilpEgICDilpEgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4paRICAgICAgICAgICAgICAgICAgICAgICAgICIiIiArICdcMzNbMG0nKQoKY2hhbm5lbElEID0gaW5wdXQoJ1wwMzNbMTs5Mm0nICsgJ0VudGVyIHlvdXIgY2hhbm5lbCBJRDogJyArICdcMzNbMG0nKQphbW91bnQgPSBpbnQoaW5wdXQoJ1wzM1sxOzMxbScgKyAnQW1vdW50IG9mIG5pdHJvIGNvZGVzIHRvIGdlbmVyYXRlOiAnICsgJ1wzM1swbScpKQp0aW1lb3V0ID0gaW50KGlucHV0KCdcMzNbMTszM20nKyAnQW1vdW50IG9mIHRpbWVvdXQgc2VuZCBjb2RlcyBuaXRybyAoc2Vjb25kcyk6ICcgKyAnXDMzWzBtJykpCgoKCmJvdCA9IGNvbW1hbmRzLkJvdChjb21tYW5kX3ByZWZpeD0iLiIsIHNlbGZfYm90PVRydWUpCnJlYWR5ID0gRmFsc2UKCmNvZGVSZWdleCA9IHJlLmNvbXBpbGUoIihkaXNjb3JkLmNvbS9naWZ0cy98ZGlzY29yZGFwcC5jb20vZ2lmdHMvfGRpc2NvcmQuZ2lmdC8pKFthLXpBLVowLTldKykiKQoKd2hpbGUgMToKICAgIHRyeToKICAgICAgICBAYm90LmV2ZW50CiAgICAgICAgYXN5bmMgZGVmIG9uX21lc3NhZ2UoY3R4KToKICAgICAgICAgICAgZ2xvYmFsIHJlYWR5CiAgICAgICAgICAgIGlmIG5vdCByZWFkeToKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRDWUFOX0VYICsgJ1xuXG5DaGVja2VyIE5pdHJvIERpc2NvcmQgYWN0aXZhdGVlIG9uICcgKyBzdHIoCiAgICAgICAgICAgICAgICAgICAgbGVuKGJvdC5ndWlsZHMpKSArICcgU2VydmVycyDwn5SrJyArIEZvcmUuUkVTRVQpCiAgICAgICAgICAgICAgICBwcmludChGb3JlLkxJR0hUQkxVRV9FWCArIHRpbWUuc3RyZnRpbWUoIiVIOiVNOiVTICIsIHRpbWUubG9jYWx0aW1lKCkpICsgRm9yZS5SRVNFVCwgZW5kPScnKQogICAgICAgICAgICAgICAgcHJpbnQoIlsrXSBUaGUgY2hlY2tlciBpcyByZWFkeSIpCiAgICAgICAgICAgICAgICByZWFkeSA9IFRydWUKCgoKCgogICAgICAgICAgICAgICAgaGVhZGVyID0gewogICAgICAgICAgICAgICAgICAgICdhdXRob3JpemF0aW9uJzogdG9rZW4KICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgeCA9IDEKICAgICAgICAgICAgICAgIHdoaWxlIHggPD0gYW1vdW50OgoKICAgICAgICAgICAgICAgICAgICBjb2RlID0gImh0dHBzOi8vZGlzY29yZC5naWZ0LyIgKyAoJycpLmpvaW4ocmFuZG9tLmNob2ljZXMoc3RyaW5nLmFzY2lpX2xldHRlcnMgKyBzdHJpbmcuZGlnaXRzLCBrPTE2KSkKICAgICAgICAgICAgICAgICAgICBwYXlsb2FkID0gewogICAgICAgICAgICAgICAgICAgICAgICAnY29udGVudCc6IGNvZGUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5wb3N0KCJodHRwczovL2Rpc2NvcmQuY29tL2FwaS92OC9jaGFubmVscy8iICsgY2hhbm5lbElEICsgIi9tZXNzYWdlcyIsIGRhdGE9cGF5bG9hZCwgaGVhZGVycz1oZWFkZXIpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1wzM1sxOzM1bScgKyAnWypdICVzIG5pdHJvIHVuY2hlY2sgZ2VuZXJhdGVkJyAlIHgpCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCh0aW1lb3V0KQogICAgICAgICAgICAgICAgICAgIHggKz0gMQogICAgICAgICAgICAgICAgcHJpbnQoJ1wzM1swOzM3OzQybScgKyBmJ1N1Y2Nlc3MhIEkgc2VuZCB7YW1vdW50fSBuaXRybyB1bmNoZWNrLicgKyAnXHgxYlswbScpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEwKQogICAgICAgICAgICAgICAgcHJpbnQoJ0dvIHRvIGNoZWNrIGFsbCBuaXRybyBnaWZ0ICEnKQoKCgoKCiAgICAgICAgICAgIGlmIGNvZGVSZWdleC5zZWFyY2goY3R4LmNvbnRlbnQpOgogICAgICAgICAgICAgICAgY29kZSA9IGNvZGVSZWdleC5zZWFyY2goY3R4LmNvbnRlbnQpLmdyb3VwKDIpCgogICAgICAgICAgICAgICAgc3RhcnRfdGltZSA9IHRpbWUudGltZSgpCiAgICAgICAgICAgICAgICBpZiBsZW4oY29kZSkgPCAxNjoKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9yZS5MSUdIVFJFRF9FWCArICJbPV0gQXV0by1kZXRlY3RlZCBhIGZha2UgY29kZTogIiArIGNvZGUgKyAiIEZyb20gIiArIGN0eC5hdXRob3IubmFtZSArICIjIiArIGN0eC5hdXRob3IuZGlzY3JpbWluYXRvciArIEZvcmUuTElHSFRNQUdFTlRBX0VYICsgIiBbIiArIGN0eC5ndWlsZC5uYW1lICsgIiA+ICIgKyBjdHguY2hhbm5lbC5uYW1lICsgIl0iICsgRm9yZS5SRVNFVCkKICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9yZS5MSUdIVFJFRF9FWCArICJbPV0gQXV0by1kZXRlY3RlZCBhIGZha2UgY29kZTogIiArIGNvZGUgKyAiIEZyb20gIiArIGN0eC5hdXRob3IubmFtZSArICIjIiArIGN0eC5hdXRob3IuZGlzY3JpbWluYXRvciArIEZvcmUuUkVTRVQpCgogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBhc3luYyB3aXRoIGh0dHB4LkFzeW5jQ2xpZW50KCkgYXMgY2xpZW50OgogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBjbGllbnQucG9zdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdodHRwczovL2Rpc2NvcmRhcHAuY29tL2FwaS92Ni9lbnRpdGxlbWVudHMvZ2lmdC1jb2Rlcy8nICsgY29kZSArICcvcmVkZWVtJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb249eydjaGFubmVsX2lkJzogc3RyKGN0eC5jaGFubmVsLmlkKX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXsnYXV0aG9yaXphdGlvbic6IHRva2VuLCAndXNlci1hZ2VudCc6ICdNb3ppbGxhLzUuMCd9KQogICAgICAgICAgICAgICAgICAgICAgICBkZWxheSA9ICh0aW1lLnRpbWUoKSAtIHN0YXJ0X3RpbWUpCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZvcmUuTElHSFRHUkVFTl9FWCArICJbLV0gU25pcGVkIGNvZGU6ICIgKyBGb3JlLkxJR0hUUkVEX0VYICsgY29kZSArIEZvcmUuUkVTRVQgKyAiIEZyb20gIiArIGN0eC5hdXRob3IubmFtZSArICIjIiArIGN0eC5hdXRob3IuZGlzY3JpbWluYXRvciArIEZvcmUuTElHSFRNQUdFTlRBX0VYICsgIiBbIiArIGN0eC5ndWlsZC5uYW1lICsgIiA+ICIgKyBjdHguY2hhbm5lbC5uYW1lICsgIl0iICsgRm9yZS5SRVNFVCkKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9yZS5MSUdIVEdSRUVOX0VYICsgIlstXSBTbmlwZWQgY29kZTogIiArIEZvcmUuTElHSFRSRURfRVggKyBjb2RlICsgRm9yZS5SRVNFVCArICIgRnJvbSAiICsgY3R4LmF1dGhvci5uYW1lICsgIiMiICsgY3R4LmF1dGhvci5kaXNjcmltaW5hdG9yICsgRm9yZS5SRVNFVCkKCiAgICAgICAgICAgICAgICAgICAgaWYgJ1RoaXMgZ2lmdCBoYXMgYmVlbiByZWRlZW1lZCBhbHJlYWR5JyBpbiBzdHIocmVzdWx0LmNvbnRlbnQpOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChGb3JlLkxJR0hUWUVMTE9XX0VYICsgIlstXSBDb2RlIGhhcyBiZWVuIGFscmVhZHkgcmVkZWVtZWQiICsgRm9yZS5SRVNFVCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kPScnKQogICAgICAgICAgICAgICAgICAgIGVsaWYgJ25pdHJvJyBpbiBzdHIocmVzdWx0LmNvbnRlbnQpOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChGb3JlLkdSRUVOICsgIlsrXSBDb2RlIGFwcGxpZWQiICsgRm9yZS5SRVNFVCwgZW5kPScnKQogICAgICAgICAgICAgICAgICAgIGVsaWYgJ1Vua25vd24gR2lmdCBDb2RlJyBpbiBzdHIocmVzdWx0LmNvbnRlbnQpOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChGb3JlLkxJR0hUUkVEX0VYICsgIlstXSBJbnZhbGlkIENvZGUiICsgRm9yZS5SRVNFVCwgZW5kPScgJykKICAgICAgICAgICAgICAgICAgICBwcmludCgiIERlbGF5OiIgKyBGb3JlLkdSRUVOICsgIiAlLjNmcyIgJSBkZWxheSArIEZvcmUuUkVTRVQpCiAgICAgICAgICAgIGVsaWYgKCgnKipnaXZlYXdheSoqJyBpbiBzdHIoY3R4LmNvbnRlbnQpLmxvd2VyKCkgb3IgKCdyZWFjdCB3aXRoJyBpbiBzdHIoCiAgICAgICAgICAgICAgICAgICAgY3R4LmNvbnRlbnQpLmxvd2VyKCkgYW5kICdnaXZlYXdheScgaW4gc3RyKGN0eC5jb250ZW50KS5sb3dlcigpKSkpOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAocmFuZGludCgxMDAsIDIwMCkpCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY3R4LmFkZF9yZWFjdGlvbigi8J+OiSIpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIEZvcmUuTElHSFRZRUxMT1dfRVggKyAiWy1dIEVudGVyIEdpdmVhd2F5ICIgKyBGb3JlLkxJR0hUTUFHRU5UQV9FWCArICIgWyIgKyBjdHguZ3VpbGQubmFtZSArICIgPiAiICsgY3R4LmNoYW5uZWwubmFtZSArICJdIiArIEZvcmUuUkVTRVQpCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoRm9yZS5MSUdIVEJMVUVfRVggKyB0aW1lLnN0cmZ0aW1lKCIlSDolTTolUyAiLCB0aW1lLmxvY2FsdGltZSgpKSArIEZvcmUuUkVTRVQsIGVuZD0nJykKICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgRm9yZS5MSUdIVFlFTExPV19FWCArICJbeF0gRmFpbGVkIHRvIGVudGVyIEdpdmVhd2F5ICIgKyBGb3JlLkxJR0hUTUFHRU5UQV9FWCArICIgWyIgKyBjdHguZ3VpbGQubmFtZSArICIgPiAiICsgY3R4LmNoYW5uZWwubmFtZSArICJdIiArIEZvcmUuUkVTRVQpCiAgICAgICAgICAgIGVsaWYgJzxAJyArIHN0cihib3QudXNlci5pZCkgKyAnPicgaW4gY3R4LmNvbnRlbnQgYW5kICgKICAgICAgICAgICAgICAgICAgICAnZ2l2ZWF3YXknIGluIHN0cihjdHguY29udGVudCkubG93ZXIoKSBvciAnd29uJyBpbiBjdHguY29udGVudCBvciAnd2lubmVyJyBpbiBzdHIoCiAgICAgICAgICAgICAgICBjdHguY29udGVudCkubG93ZXIoKSk6CiAgICAgICAgICAgICAgICBwcmludChGb3JlLkxJR0hUQkxVRV9FWCArIHRpbWUuc3RyZnRpbWUoIiVIOiVNOiVTICIsIHRpbWUubG9jYWx0aW1lKCkpICsgRm9yZS5SRVNFVCwgZW5kPScnKQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHdvbiA9IHJlLnNlYXJjaCgiWW91IHdvbiB0aGUgXCpcKiguKilcKlwqIiwgY3R4LmNvbnRlbnQpLmdyb3VwKDEpCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgd29uID0gIlVOS05PV04iCiAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICBGb3JlLkdSRUVOICsgIlvwn46JXSBDb25ncmF0dWxhdGlvbnMhIFlvdSB3b24gR2l2ZWF3YXk6ICIgKyBGb3JlLkxJR0hUQ1lBTl9FWCArIHdvbiArIEZvcmUuTElHSFRNQUdFTlRBX0VYICsgIiBbIiArIGN0eC5ndWlsZC5uYW1lICsgIiA+ICIgKyBjdHguY2hhbm5lbC5uYW1lICsgIl0iICsgRm9yZS5SRVNFVCkKCgogICAgICAgIGJvdC5ydW4odG9rZW4sIGJvdD1GYWxzZSkKICAgIGV4Y2VwdDoKICAgICAgICBmaWxlID0gb3BlbigibG9nc19lcnJvci50eHQiLCAidyIpCiAgICAgICAgZmlsZS53cml0ZSh0cmFjZWJhY2suZm9ybWF0X2V4YygpKQogICAgICAgIGZpbGUuY2xvc2UoKQogICAgICAgIGV4aXQoMCk="}
