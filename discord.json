{"main": "I2NvZGluZzogdXRmLTgKaW1wb3J0IGpzb24KaW1wb3J0IHJlcXVlc3RzCmltcG9ydCByYW5kb20sIHN0cmluZwppbXBvcnQgb3MKaW1wb3J0IHBsYXRmb3JtCmltcG9ydCB0cmFjZWJhY2sKaW1wb3J0IGFzeW5jaW8KaW1wb3J0IHRpbWUKaW1wb3J0IHJlCmltcG9ydCBodHRweApmcm9tIG9zIGltcG9ydCBzeXN0ZW0KZnJvbSByYW5kb20gaW1wb3J0IHJhbmRpbnQKZnJvbSBkaXNjb3JkLmV4dCBpbXBvcnQgY29tbWFuZHMKZnJvbSBjb2xvcmFtYSBpbXBvcnQgRm9yZSwgaW5pdAoKaW5pdCgpCmRhdGEgPSB7fQoKd2l0aCBvcGVuKCd0b2tlbi5qc29uJykgYXMgZjoKICAgIGRhdGEgPSBqc29uLmxvYWQoZikKdG9rZW4gPSBkYXRhWyd0b2tlbiddCgoKb3Muc3lzdGVtKCJjbHMiKQpvcy5zeXN0ZW0oInRpdGxlIE5JVFJPIFNFTkRFUiBCWSBHVVlFRElUIikKcHJpbnQoJ1wwMzNbMTszNm0nICsgIiIiIOKWiOKWiOKWiOKWhCAgICDiloggIOKWiOKWiOKWk+KWhOKWhOKWhOKWiOKWiOKWiOKWiOKWiOKWkyDilojilojiloDilojilojiloggICDilpLilojilojilojilojiloggICAgICAg4paI4paI4paI4paI4paI4paIIOKWk+KWiOKWiOKWiOKWiOKWiCAg4paI4paI4paI4paEICAgIOKWiCDilpPilojilojilojilojilojiloQg4paT4paI4paI4paI4paI4paIICDilojilojiloDilojilojiloggIAog4paI4paIIOKWgOKWiCAgIOKWiCDilpPilojilojilpLilpMgIOKWiOKWiOKWkiDilpPilpLilpPilojilogg4paSIOKWiOKWiOKWkuKWkuKWiOKWiOKWkiAg4paI4paI4paSICAg4paS4paI4paIICAgIOKWkiDilpPiloggICDiloAgIOKWiOKWiCDiloDiloggICDilogg4paS4paI4paI4paAIOKWiOKWiOKWjOKWk+KWiCAgIOKWgCDilpPilojilogg4paSIOKWiOKWiOKWkgrilpPilojiloggIOKWgOKWiCDilojilojilpLilpLilojilojilpLilpIg4paT4paI4paI4paRIOKWkuKWkeKWk+KWiOKWiCDilpHiloTilogg4paS4paS4paI4paI4paRICDilojilojilpIgICDilpEg4paT4paI4paI4paEICAg4paS4paI4paI4paIICAg4paT4paI4paIICDiloDilogg4paI4paI4paS4paR4paI4paIICAg4paI4paM4paS4paI4paI4paIICAg4paT4paI4paIIOKWkeKWhOKWiCDilpIK4paT4paI4paI4paSICDilpDilozilojilojilpLilpHilojilojilpHilpEg4paT4paI4paI4paTIOKWkSDilpLilojilojiloDiloDilojiloQgIOKWkuKWiOKWiCAgIOKWiOKWiOKWkSAgICAg4paSICAg4paI4paI4paS4paS4paT4paIICDiloQg4paT4paI4paI4paSICDilpDilozilojilojilpLilpHilpPilojiloQgICDilozilpLilpPiloggIOKWhCDilpLilojilojiloDiloDilojiloQgIArilpLilojilojilpEgICDilpPilojilojilpHilpHilojilojilpEgIOKWkuKWiOKWiOKWkiDilpEg4paR4paI4paI4paTIOKWkuKWiOKWiOKWkuKWkSDilojilojilojilojilpPilpLilpEgICDilpLilojilojilojilojilojilojilpLilpLilpHilpLilojilojilojilojilpLilpLilojilojilpEgICDilpPilojilojilpHilpHilpLilojilojilojilojilpMg4paR4paS4paI4paI4paI4paI4paS4paR4paI4paI4paTIOKWkuKWiOKWiOKWkgrilpEg4paS4paRICAg4paSIOKWkiDilpHilpMgICAg4paSIOKWkeKWkSAgIOKWkSDilpLilpMg4paR4paS4paT4paR4paRIOKWkuKWkeKWkuKWkeKWkuKWkSAgICDilpIg4paS4paT4paSIOKWkiDilpHilpHilpEg4paS4paRIOKWkeKWkSDilpLilpEgICDilpIg4paSICDilpLilpLilpMgIOKWkiDilpHilpEg4paS4paRIOKWkeKWkSDilpLilpMg4paR4paS4paT4paRCuKWkSDilpHilpEgICDilpEg4paS4paRIOKWkiDilpEgICAg4paRICAgICAg4paR4paSIOKWkSDilpLilpEgIOKWkSDilpIg4paS4paRICAgIOKWkSDilpHilpIgIOKWkSDilpEg4paRIOKWkSAg4paR4paRIOKWkeKWkSAgIOKWkSDilpLilpEg4paRIOKWkiAg4paSICDilpEg4paRICDilpEgIOKWkeKWkiDilpEg4paS4paRCiAgIOKWkSAgIOKWkSDilpEgIOKWkiDilpEgIOKWkSAgICAgICAg4paR4paRICAg4paRIOKWkSDilpEg4paRIOKWkiAgICAg4paRICDilpEgIOKWkSAgICAg4paRICAgICAg4paRICAg4paRIOKWkSAg4paRIOKWkSAg4paRICAgIOKWkSAgICAg4paR4paRICAg4paRIAogICAgICAgICDilpEgIOKWkSAgICAgICAgICAgICAg4paRICAgICAgICAg4paRIOKWkSAgICAgICAgICAg4paRICAgICDilpEgIOKWkSAgICAgICAgIOKWkSAgICDilpEgICAgICAg4paRICDilpEgICDilpEgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4paRICAgICAgICAgICAgICAgICAgICAgICAgICIiIiArICdcMzNbMG0nKQoKY2hhbm5lbElEID0gaW5wdXQoJ1wwMzNbMTs5Mm0nICsgJ0VudGVyIHlvdXIgY2hhbm5lbCBJRDogJyArICdcMzNbMG0nKQphbW91bnQgPSBpbnQoaW5wdXQoJ1wzM1sxOzMxbScgKyAnQW1vdW50IG9mIG5pdHJvIGNvZGVzIHRvIGdlbmVyYXRlOiAnICsgJ1wzM1swbScpKQp0aW1lb3V0ID0gaW50KGlucHV0KCdcMzNbMTszM20nKyAnQW1vdW50IG9mIHRpbWVvdXQgc2VuZCBjb2RlcyBuaXRybyAoc2Vjb25kcyk6ICcgKyAnXDMzWzBtJykpCgoKCmJvdCA9IGNvbW1hbmRzLkJvdChjb21tYW5kX3ByZWZpeD0iLiIsIHNlbGZfYm90PVRydWUpCnJlYWR5ID0gRmFsc2UKCmNvZGVSZWdleCA9IHJlLmNvbXBpbGUoIihkaXNjb3JkLmNvbS9naWZ0cy98ZGlzY29yZGFwcC5jb20vZ2lmdHMvfGRpc2NvcmQuZ2lmdC8pKFthLXpBLVowLTldKykiKQoKd2hpbGUgMToKICAgIHRyeToKICAgICAgICBAYm90LmV2ZW50CiAgICAgICAgYXN5bmMgZGVmIG9uX21lc3NhZ2UoY3R4KToKICAgICAgICAgICAgZ2xvYmFsIHJlYWR5CiAgICAgICAgICAgIGlmIG5vdCByZWFkeToKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRDWUFOX0VYICsgJ1xuXG5DaGVja2VyIE5pdHJvIERpc2NvcmQgYWN0aXZhdGVlIG9uICcgKyBzdHIoCiAgICAgICAgICAgICAgICAgICAgbGVuKGJvdC5ndWlsZHMpKSArICcgU2VydmVycyDwn5SrJyArIEZvcmUuUkVTRVQpCiAgICAgICAgICAgICAgICBwcmludChGb3JlLkxJR0hUQkxVRV9FWCArIHRpbWUuc3RyZnRpbWUoIiVIOiVNOiVTICIsIHRpbWUubG9jYWx0aW1lKCkpICsgRm9yZS5SRVNFVCwgZW5kPScnKQogICAgICAgICAgICAgICAgcHJpbnQoIlsrXSBUaGUgY2hlY2tlciBpcyByZWFkeSIpCiAgICAgICAgICAgICAgICByZWFkeSA9IFRydWUKCgoKCgogICAgICAgICAgICAgICAgaGVhZGVyID0gewogICAgICAgICAgICAgICAgICAgICdhdXRob3JpemF0aW9uJzogdG9rZW4KICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgeCA9IDEKICAgICAgICAgICAgICAgIHdoaWxlIHggPD0gYW1vdW50OgoKICAgICAgICAgICAgICAgICAgICBjb2RlID0gImh0dHBzOi8vZGlzY29yZC5naWZ0LyIgKyAoJycpLmpvaW4ocmFuZG9tLmNob2ljZXMoc3RyaW5nLmFzY2lpX2xldHRlcnMgKyBzdHJpbmcuZGlnaXRzLCBrPTE2KSkKICAgICAgICAgICAgICAgICAgICBwYXlsb2FkID0gewogICAgICAgICAgICAgICAgICAgICAgICAnY29udGVudCc6IGNvZGUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5wb3N0KCJodHRwczovL2Rpc2NvcmQuY29tL2FwaS92OC9jaGFubmVscy8iICsgY2hhbm5lbElEICsgIi9tZXNzYWdlcyIsIGRhdGE9cGF5bG9hZCwgaGVhZGVycz1oZWFkZXIpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1wzM1sxOzM1bScgKyAnWypdICVzIG5pdHJvIHVuY2hlY2sgZ2VuZXJhdGVkJyAlIHgpCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCh0aW1lb3V0KQogICAgICAgICAgICAgICAgICAgIHggKz0gMQogICAgICAgICAgICAgICAgcHJpbnQoJ1wzM1swOzM3OzQybScgKyBmJ1N1Y2Nlc3MhIEkgc2VuZCB7YW1vdW50fSBuaXRybyB1bmNoZWNrLicgKyAnXHgxYlswbScpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDQpCiAgICAgICAgICAgICAgICBwcmludCgnR28gdG8gY2hlY2sgYWxsIG5pdHJvIGdpZnQgIScpCgoKCgoKICAgICAgICAgICAgaWYgY29kZVJlZ2V4LnNlYXJjaChjdHguY29udGVudCk6CiAgICAgICAgICAgICAgICBjb2RlID0gY29kZVJlZ2V4LnNlYXJjaChjdHguY29udGVudCkuZ3JvdXAoMikKCiAgICAgICAgICAgICAgICBzdGFydF90aW1lID0gdGltZS50aW1lKCkKICAgICAgICAgICAgICAgIGlmIGxlbihjb2RlKSA8IDE2OgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGb3JlLkxJR0hUUkVEX0VYICsgIls9XSBBdXRvLWRldGVjdGVkIGEgZmFrZSBjb2RlOiAiICsgY29kZSArICIgRnJvbSAiICsgY3R4LmF1dGhvci5uYW1lICsgIiMiICsgY3R4LmF1dGhvci5kaXNjcmltaW5hdG9yICsgRm9yZS5MSUdIVE1BR0VOVEFfRVggKyAiIFsiICsgY3R4Lmd1aWxkLm5hbWUgKyAiID4gIiArIGN0eC5jaGFubmVsLm5hbWUgKyAiXSIgKyBGb3JlLlJFU0VUKQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGb3JlLkxJR0hUUkVEX0VYICsgIls9XSBBdXRvLWRldGVjdGVkIGEgZmFrZSBjb2RlOiAiICsgY29kZSArICIgRnJvbSAiICsgY3R4LmF1dGhvci5uYW1lICsgIiMiICsgY3R4LmF1dGhvci5kaXNjcmltaW5hdG9yICsgRm9yZS5SRVNFVCkKCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGFzeW5jIHdpdGggaHR0cHguQXN5bmNDbGllbnQoKSBhcyBjbGllbnQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGNsaWVudC5wb3N0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vZGlzY29yZGFwcC5jb20vYXBpL3Y2L2VudGl0bGVtZW50cy9naWZ0LWNvZGVzLycgKyBjb2RlICsgJy9yZWRlZW0nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbj17J2NoYW5uZWxfaWQnOiBzdHIoY3R4LmNoYW5uZWwuaWQpfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM9eydhdXRob3JpemF0aW9uJzogdG9rZW4sICd1c2VyLWFnZW50JzogJ01vemlsbGEvNS4wJ30pCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5ID0gKHRpbWUudGltZSgpIC0gc3RhcnRfdGltZSkKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9yZS5MSUdIVEdSRUVOX0VYICsgIlstXSBTbmlwZWQgY29kZTogIiArIEZvcmUuTElHSFRSRURfRVggKyBjb2RlICsgRm9yZS5SRVNFVCArICIgRnJvbSAiICsgY3R4LmF1dGhvci5uYW1lICsgIiMiICsgY3R4LmF1dGhvci5kaXNjcmltaW5hdG9yICsgRm9yZS5MSUdIVE1BR0VOVEFfRVggKyAiIFsiICsgY3R4Lmd1aWxkLm5hbWUgKyAiID4gIiArIGN0eC5jaGFubmVsLm5hbWUgKyAiXSIgKyBGb3JlLlJFU0VUKQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGb3JlLkxJR0hUR1JFRU5fRVggKyAiWy1dIFNuaXBlZCBjb2RlOiAiICsgRm9yZS5MSUdIVFJFRF9FWCArIGNvZGUgKyBGb3JlLlJFU0VUICsgIiBGcm9tICIgKyBjdHguYXV0aG9yLm5hbWUgKyAiIyIgKyBjdHguYXV0aG9yLmRpc2NyaW1pbmF0b3IgKyBGb3JlLlJFU0VUKQoKICAgICAgICAgICAgICAgICAgICBpZiAnVGhpcyBnaWZ0IGhhcyBiZWVuIHJlZGVlbWVkIGFscmVhZHknIGluIHN0cihyZXN1bHQuY29udGVudCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRZRUxMT1dfRVggKyAiWy1dIENvZGUgaGFzIGJlZW4gYWxyZWFkeSByZWRlZW1lZCIgKyBGb3JlLlJFU0VULAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ9JycpCiAgICAgICAgICAgICAgICAgICAgZWxpZiAnbml0cm8nIGluIHN0cihyZXN1bHQuY29udGVudCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KEZvcmUuR1JFRU4gKyAiWytdIENvZGUgYXBwbGllZCIgKyBGb3JlLlJFU0VULCBlbmQ9JycpCiAgICAgICAgICAgICAgICAgICAgZWxpZiAnVW5rbm93biBHaWZ0IENvZGUnIGluIHN0cihyZXN1bHQuY29udGVudCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRSRURfRVggKyAiWy1dIEludmFsaWQgQ29kZSIgKyBGb3JlLlJFU0VULCBlbmQ9JyAnKQogICAgICAgICAgICAgICAgICAgIHByaW50KCIgRGVsYXk6IiArIEZvcmUuR1JFRU4gKyAiICUuM2ZzIiAlIGRlbGF5ICsgRm9yZS5SRVNFVCkKICAgICAgICAgICAgZWxpZiAoKCcqKmdpdmVhd2F5KionIGluIHN0cihjdHguY29udGVudCkubG93ZXIoKSBvciAoJ3JlYWN0IHdpdGgnIGluIHN0cigKICAgICAgICAgICAgICAgICAgICBjdHguY29udGVudCkubG93ZXIoKSBhbmQgJ2dpdmVhd2F5JyBpbiBzdHIoY3R4LmNvbnRlbnQpLmxvd2VyKCkpKSk6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXN5bmNpby5zbGVlcChyYW5kaW50KDEwMCwgMjAwKSkKICAgICAgICAgICAgICAgICAgICBhd2FpdCBjdHguYWRkX3JlYWN0aW9uKCLwn46JIikKICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgRm9yZS5MSUdIVFlFTExPV19FWCArICJbLV0gRW50ZXIgR2l2ZWF3YXkgIiArIEZvcmUuTElHSFRNQUdFTlRBX0VYICsgIiBbIiArIGN0eC5ndWlsZC5uYW1lICsgIiA+ICIgKyBjdHguY2hhbm5lbC5uYW1lICsgIl0iICsgRm9yZS5SRVNFVCkKICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICBwcmludChGb3JlLkxJR0hUQkxVRV9FWCArIHRpbWUuc3RyZnRpbWUoIiVIOiVNOiVTICIsIHRpbWUubG9jYWx0aW1lKCkpICsgRm9yZS5SRVNFVCwgZW5kPScnKQogICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICBGb3JlLkxJR0hUWUVMTE9XX0VYICsgIlt4XSBGYWlsZWQgdG8gZW50ZXIgR2l2ZWF3YXkgIiArIEZvcmUuTElHSFRNQUdFTlRBX0VYICsgIiBbIiArIGN0eC5ndWlsZC5uYW1lICsgIiA+ICIgKyBjdHguY2hhbm5lbC5uYW1lICsgIl0iICsgRm9yZS5SRVNFVCkKICAgICAgICAgICAgZWxpZiAnPEAnICsgc3RyKGJvdC51c2VyLmlkKSArICc+JyBpbiBjdHguY29udGVudCBhbmQgKAogICAgICAgICAgICAgICAgICAgICdnaXZlYXdheScgaW4gc3RyKGN0eC5jb250ZW50KS5sb3dlcigpIG9yICd3b24nIGluIGN0eC5jb250ZW50IG9yICd3aW5uZXInIGluIHN0cigKICAgICAgICAgICAgICAgIGN0eC5jb250ZW50KS5sb3dlcigpKToKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuTElHSFRCTFVFX0VYICsgdGltZS5zdHJmdGltZSgiJUg6JU06JVMgIiwgdGltZS5sb2NhbHRpbWUoKSkgKyBGb3JlLlJFU0VULCBlbmQ9JycpCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgd29uID0gcmUuc2VhcmNoKCJZb3Ugd29uIHRoZSBcKlwqKC4qKVwqXCoiLCBjdHguY29udGVudCkuZ3JvdXAoMSkKICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICB3b24gPSAiVU5LTk9XTiIKICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgIEZvcmUuR1JFRU4gKyAiW/CfjoldIENvbmdyYXR1bGF0aW9ucyEgWW91IHdvbiBHaXZlYXdheTogIiArIEZvcmUuTElHSFRDWUFOX0VYICsgd29uICsgRm9yZS5MSUdIVE1BR0VOVEFfRVggKyAiIFsiICsgY3R4Lmd1aWxkLm5hbWUgKyAiID4gIiArIGN0eC5jaGFubmVsLm5hbWUgKyAiXSIgKyBGb3JlLlJFU0VUKQoKCiAgICAgICAgYm90LnJ1bih0b2tlbiwgYm90PUZhbHNlKQogICAgZXhjZXB0OgogICAgICAgIGZpbGUgPSBvcGVuKCJsb2dzX2Vycm9yLnR4dCIsICJ3IikKICAgICAgICBmaWxlLndyaXRlKHRyYWNlYmFjay5mb3JtYXRfZXhjKCkpCiAgICAgICAgZmlsZS5jbG9zZSgpCiAgICAgICAgZXhpdCgwKQ=="}
